---
import { toTitleCase } from '$/utils'
const NAV_ITEMS: NavItems = {
        home: {
                path: "/",
                title: "ãƒ›ãƒ¼ãƒ ",
        },
        blog: {
                path: "/blog",
                title: "è¦³å…‰ãƒ»ã‚°ãƒ«ãƒ¡",
                children: [
                  { path: "/blog", "title": "ãƒªã‚¹ãƒˆã‹ã‚‰æ¢ã™"},
                  { path: "/tags", "title": "ã‚¿ã‚°ã‹ã‚‰æ¢ã™"},
                  { path: "/map", "title": "åœ°å›³ã‹ã‚‰æ¢ã™"},
                  { path: "/photos", "title": "å†™çœŸã‹ã‚‰æ¢ã™ğŸš§"},
                ],
        },
        course: {
                path: "/course",
                title: "ãƒ¢ãƒ‡ãƒ«ã‚³ãƒ¼ã‚¹",
        },
        event: {
                path: "/events",
                title: "ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ğŸš§",
        },
        media: {
                path: "/links",
                title: "ãƒªãƒ³ã‚¯é›†",
        },
        about: {
                path: "/others",
                title: "ãã®ä»–",
        },
};

export const NAV_STYLES = {
  topLevelText: "text-2xl font-semibold",
  childText: "text-lg font-medium",
  spacing: "space-y-4",
  itemSpacing: "space-y-2 ml-4 mt-3",
  linkBase: "block hover:underline",
};
---

<!-- ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ã‚¢ã‚¤ã‚³ãƒ³ -->
<button id="menu-toggle" class="text-3xl p-1 mr-1 md:pl-4">â˜°</button>

<!-- ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ -->
<div id="drawer-overlay" class="hidden fixed inset-0 bg-black/50 z-40"></div>

<!-- ã‚¹ãƒ©ã‚¤ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
<aside id="drawer" class="hidden fixed top-0 left-0 h-full w-56 bg-white dark:bg-gray-800 z-50 shadow-md p-4">
<button id="close-drawer" class="mb-4 text-xl">âœ•</button>
<ul class={NAV_STYLES.spacing}>
  {
    Object.entries(NAV_ITEMS).map(([key, item]) => (
      <li>
        {
          item.children ? (
            <>
              <a
                href={item.path}
                class={`${NAV_STYLES.linkBase} ${NAV_STYLES.topLevelText}`}
              >
                <span class={NAV_STYLES.topLevelText}>{item.title}</span>
              </a>
              <ul class={NAV_STYLES.itemSpacing}>
                {
                  item.children.map(child => (
                    <li>
                      <a
                        href={child.path}
                        class={`${NAV_STYLES.linkBase} ${NAV_STYLES.childText}`}
                      >
                        {toTitleCase(child.title)}
                      </a>
                    </li>
                  ))
                }
              </ul>
            </>
          ) : (
            <a
              href={item.path}
              class={`${NAV_STYLES.linkBase} ${NAV_STYLES.topLevelText}`}
            >
              {toTitleCase(item.title)}
            </a>
          )
        }
      </li>
    ))
  }
</ul>
</aside>

<!-- JSã§åˆ¶å¾¡ -->
<script is:inline>
  document.addEventListener('DOMContentLoaded', () => {
    const toggle = document.getElementById('menu-toggle');
    const drawer = document.getElementById('drawer');
    const overlay = document.getElementById('drawer-overlay');
    const close = document.getElementById('close-drawer');

    toggle.addEventListener('click', () => {
      drawer.classList.remove('hidden');
      overlay.classList.remove('hidden');
    });

    close.addEventListener('click', hide);
    overlay.addEventListener('click', hide);

    function hide() {
      drawer.classList.add('hidden');
      overlay.classList.add('hidden');
    }
  });
</script>

