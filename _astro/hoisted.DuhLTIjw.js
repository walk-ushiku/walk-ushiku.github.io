import"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js";document.addEventListener("DOMContentLoaded",()=>{const a=JSON.parse(document.getElementById("places-data").textContent),s=JSON.parse(document.getElementById("target-url").textContent),m=JSON.parse(document.getElementById("zoom-level").textContent),n=a.find(t=>t.url==s),p=n?[n.lat,n.lng]:[35.97607932324101,140.1408927819724],c=L.map("map").setView(p,m);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"Â© OpenStreetMap contributors"}).addTo(c);const l=L.icon({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});L.icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),a.forEach(t=>{var i=l;if(t.icon!="undefined"){var e,o,r=t.width/t.height;r>1?(e=80,o=Math.floor(e/r)):(o=80,e=Math.floor(o*r)),i=L.icon({iconUrl:t.icon,iconSize:[e,o],iconAnchor:[25,50],popupAnchor:[0,-50]})}L.marker([t.lat,t.lng],{icon:i}).addTo(c).bindPopup(`<a href="${t.url}">${t.title}</a>`)})});
